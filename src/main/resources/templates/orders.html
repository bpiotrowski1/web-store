<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="#{webstore.page.title}"></title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div th:replace="fragments :: header"></div>
<div class="container">
    <div class="stackable grid container">
        <h2 class="ui header" th:text="#{webstore.orders}"></h2>
        <table class="ui celled table">
            <thead>
            <th th:text="#{webstore.product.id}"></th>
            <th th:text="#{webstore.order.number}"></th>
            <th th:text="#{webstore.user}"></th>
            <th th:text="#{webstore.done}"></th>
            </thead>
            <th:block th:each="orderHeader: ${orderHeadersList}">
                <tr>
                    <td th:text="${orderHeader.id}"></td>
                    <td th:text="${orderHeader.number}"></td>
                    <td th:text="${orderHeader.purchaser.username}"></td>
                    <td th:if="${orderHeader.done}">
                        <input type="checkbox" tabindex="0" class="hidden" th:onclick="'javascript:makeDone(' + ${orderHeader.id} + ', ' + ${orderHeader.done} + ')'" checked>
                    </td>
                    <td th:unless="${orderHeader.done}">
                        <input type="checkbox" tabindex="0" class="hidden" th:onclick="'javascript:makeDone(' + ${orderHeader.id} + ', ' + ${orderHeader.done} + ')'">
                    </td>
                </tr>
            </th:block>
        </table>
    </div>
</div>

<div th:replace="fragments :: footer"></div>

<script src="jquery.js"></script>
<script>
    function makeDone(id, done) {
        if(done === true) {
            var url = "orders/undo/" + id;
            $.ajax({
                type : "GET",
                url : url
            })
        } else {
            url = "orders/done/" + id;
            $.ajax({
                type: "GET",
                url: url
            })
        }
    }
</script>

</body>
</html>